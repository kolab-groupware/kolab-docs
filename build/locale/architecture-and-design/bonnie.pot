# SOME DESCRIPTIVE TITLE.
# Copyright (C) 2010-2016, Kolab Systems AG
# This file is distributed under the same license as the Kolab package.
# FIRST AUTHOR <EMAIL@ADDRESS>, YEAR.
#
#, fuzzy
msgid ""
msgstr ""
"Project-Id-Version: Kolab 16\n"
"Report-Msgid-Bugs-To: \n"
"POT-Creation-Date: 2016-07-26 12:36+0200\n"
"PO-Revision-Date: YEAR-MO-DA HO:MI+ZONE\n"
"Last-Translator: FULL NAME <EMAIL@ADDRESS>\n"
"Language-Team: LANGUAGE <LL@li.org>\n"
"MIME-Version: 1.0\n"
"Content-Type: text/plain; charset=UTF-8\n"
"Content-Transfer-Encoding: 8bit\n"

#: ../../source/architecture-and-design/bonnie.rst:90
# ae33cb8cf266495cb2ebd1d4b29a4a1c
msgid "Archival, Backup, Data-Loss Prevention and e-Discovery"
msgstr ""

#: ../../source/architecture-and-design/bonnie.rst:92
# 6614ed996ea14f53a57a8ee19bc5ff15
msgid "Different challenges could potentially be resolved by implementing a single solution, providing each of the functional aspects in an integrated fashion."
msgstr ""

#: ../../source/architecture-and-design/bonnie.rst:96
# ae64e1be88e2447189c6eb25aa77ffd3
msgid "A brief overview of the functional components:"
msgstr ""

#: ../../source/architecture-and-design/bonnie.rst:98
# 74ded722f408402abc3b052c47b05797
msgid "**Archival**"
msgstr ""

#: ../../source/architecture-and-design/bonnie.rst:100
# 4c836c3db27e451cbcb334ed50d6880f
msgid "Archival is the retention of business records, in a fashion that allows them to be used as evidence."
msgstr ""

#: ../../source/architecture-and-design/bonnie.rst:103
# 1ed363c43b154da4a1fe34edc9e24146
msgid "Many archival solutions only include actual communications that descend over an SMTP server that can keep the archival solution in the loop."
msgstr ""

#: ../../source/architecture-and-design/bonnie.rst:107
# a783a324daf44e14ae75ce027038c3e1
msgid "**Backup**"
msgstr ""

#: ../../source/architecture-and-design/bonnie.rst:109
# 805ef4da82b24cdd8c5c2d750d2b2991
msgid "Backup is the lesser part to the ability to restore, a frequently occuring, everyday event."
msgstr ""

#: ../../source/architecture-and-design/bonnie.rst:112
# 7a53c1d16eb14f818f9cd768a66b5097
msgid "It is often requested backup happens on a per-mailbox or even per-message level."
msgstr ""

#: ../../source/architecture-and-design/bonnie.rst:115
# 140e67c7ca09449a91325dfe4d81fdf4
msgid "**Data-Loss Prevention**"
msgstr ""

#: ../../source/architecture-and-design/bonnie.rst:117
# a3e40fbe048a4aefa1336c30c4b82569
msgid "**e-Discovery**"
msgstr ""

#: ../../source/architecture-and-design/bonnie.rst:119
# 7670b84e4846497280d835d98e0e7b80
msgid "Maintenance of a changelog on object entries that can change state (email read/deleted), or are volatile (changes to an appointment)."
msgstr ""

#: ../../source/architecture-and-design/bonnie.rst:123
# 19c812ffd8474bc29a3b93d4d9b42666
msgid "Functional Requirements"
msgstr ""

#: ../../source/architecture-and-design/bonnie.rst:125
# dabc15b757a043388a424c2d5665b12e
msgid "**Audit Trail**"
msgstr ""

#: ../../source/architecture-and-design/bonnie.rst:127
# c225107fb9064e39a430eab03c700456
msgid "**Item Changelog**"
msgstr ""

#: ../../source/architecture-and-design/bonnie.rst:129
# 3acf8046feae4fe481989679bcf1cf0b
msgid "A per-item changelog, of whom changed what, to what item, and when."
msgstr ""

#: ../../source/architecture-and-design/bonnie.rst:131
# 08873b9475fa42349cb0d660bd8b6f87
msgid "**Queue ID Chasing**"
msgstr ""

#: ../../source/architecture-and-design/bonnie.rst:133
# 36c9047463a048c8b098814de517074b
msgid "Chase so-called Queue IDs for messages being exchanged with the outside world, and internally between systems throughout the deployment."
msgstr ""

#: ../../source/architecture-and-design/bonnie.rst:138
# ce2fb4bb15c94e94b41b153835a42a32
msgid "Functional Design"
msgstr ""

#: ../../source/architecture-and-design/bonnie.rst:141
# 8e68d3349ad447c3a6572c01bf479a9d
msgid "Functional Components"
msgstr ""

#: ../../source/architecture-and-design/bonnie.rst:143
# a6eabe9adc6f4622bd36165a1c4ce8e4
msgid "**Dealer**"
msgstr ""

#: ../../source/architecture-and-design/bonnie.rst:145
# 76c18a3dd53b40d1a8d87069e4feea6a
msgid "A dealer is a script executed once for each event notification, used to receive the initial event notification from Cyrus IMAP 2.5, and broadcast the event on to the message bus or queue."
msgstr ""

#: ../../source/architecture-and-design/bonnie.rst:149
# ca72db44ad4d4d7988c8e7081acc4220
msgid "The dealer awaits confirmation of a broker having received the event notification."
msgstr ""

#: ../../source/architecture-and-design/bonnie.rst:152
# 42a43186431844b689c5b9f359a5eb96
msgid "**Broker**"
msgstr ""

#: ../../source/architecture-and-design/bonnie.rst:154
# 236d33cab2e348e9ba4c6af1725b9159
msgid "A broker retrieves the notifications from the message bus or queue, and acknowledges having received the event notification."
msgstr ""

#: ../../source/architecture-and-design/bonnie.rst:157
# 16c6b435da164065a3d08a28784b860d
msgid "The event notification is put in to a persistent queue, awaiting workers to become ready for handling the event notification."
msgstr ""

#: ../../source/architecture-and-design/bonnie.rst:160
# 7a88112eb58745c68ff37e477e80b312
msgid "**Worker**"
msgstr ""

#: ../../source/architecture-and-design/bonnie.rst:162
# a27e30fdc015472fa4059d32e279d8d5
msgid "The worker is where the processing happens -- one can have as many workers as necessary, or as few as required."
msgstr ""

#: ../../source/architecture-and-design/bonnie.rst:165
# f5316f86d0b34cfbb3748c791f0962d7
msgid "The worker announces its presence to the broker, which subsequently assigns jobs to the worker [#]_."
msgstr ""

#: ../../source/architecture-and-design/bonnie.rst:168
# a90b3562677b495e86d9b51879dfe40d
msgid "The worker may require additional information to be obtained, such as the message payload [#]_."
msgstr ""

#: ../../source/architecture-and-design/bonnie.rst:171
# c82e85df56e24c17bc985b03ad8f54a8
msgid "**Collector**"
msgstr ""

#: ../../source/architecture-and-design/bonnie.rst:173
# a6afaad1f65141bdb4d8e28640ed14ef
msgid "The collector daemon is an optional component subscribing to requests for additional information that can only reliably be obtained from a Cyrus IMAP backend spool directory."
msgstr ""

#: ../../source/architecture-and-design/bonnie.rst:177
# 4d6c378fdd6446fba48cdd2c38924779
msgid "**System Log Centralization**"
msgstr ""

#: ../../source/architecture-and-design/bonnie.rst:179
# 6fd4121c927141b897fdfcbc4dc58362
msgid "The centralization of system log files such as :file:`/var/log/maillog` aids in tracing the exchange of messages as they descend across infrastructure, and helps in associating, for example, a Login event to an IMAP frontend with the corresponding web server session [#]_."
msgstr ""

#: ../../source/architecture-and-design/bonnie.rst:186
# 7f5f4fe80fb44d789e5674fbed36415e
msgid "Operational Requirements"
msgstr ""

#: ../../source/architecture-and-design/bonnie.rst:241
# 05bcfe3a24a94620bf8b38a40eb166fa
msgid "Broker -- Worker Interaction"
msgstr ""

#: ../../source/architecture-and-design/bonnie.rst:243
# 20fa19aa518c4a28997e091b8784bba6
msgid "When the broker starts up, it creates three listener sockets:"
msgstr ""

#: ../../source/architecture-and-design/bonnie.rst:245
# a4f2a5e6f9244d758355c9711e83dbce
msgid "A dealer router,"
msgstr ""

#: ../../source/architecture-and-design/bonnie.rst:247
# ad47772ab0944b168c42578f17ba6ecd
msgid "used for incoming event notifications from IMAP servers passed through the Dealer component."
msgstr ""

#: ../../source/architecture-and-design/bonnie.rst:249
# 28df7149cea7490f91e1f2afc75a64bd
msgid "A worker router,"
msgstr ""

#: ../../source/architecture-and-design/bonnie.rst:251
# c89518fbffba4761bcc397fea237a10a
msgid "used to exchange job information and notification payload with workers."
msgstr ""

#: ../../source/architecture-and-design/bonnie.rst:253
# e66d27e747c74803a3f0285db268c350
msgid "A control router,"
msgstr ""

#: ../../source/architecture-and-design/bonnie.rst:255
# 969f9d661c2f40e7a6c1a2d4fa79ffe5
msgid "used to exchange worker and job state information."
msgstr ""

#: ../../source/architecture-and-design/bonnie.rst:257
# ef3e2d457b2c4754abc72813f450344e
msgid "When the worker starts, it connects to both the control router and worker router."
msgstr ""

#: ../../source/architecture-and-design/bonnie.rst:260
# 8fc2cdddc1fe4ea897e2b9bf2b6d3c94
msgid "Using the controller channel, the worker let's the broker know it is ready to receive a job."
msgstr ""

#: ../../source/architecture-and-design/bonnie.rst:276
# e16a54d33a0a43058b400ce4476b5cb1
msgid "The broker adds the worker to its list of workers."
msgstr ""

#: ../../source/architecture-and-design/bonnie.rst:278
# 23339c1c38ff43e9a86e85a4b5eb2b2d
msgid "The broker will continue to receive occasional messages from the worker to allow it to determine whether or not it is still available."
msgstr ""

#: ../../source/architecture-and-design/bonnie.rst:282
# 7c0b4b204d97447cab6829c0129fd1fb
msgid "The broker, maintaining a queue of jobs to assign to workers, lets the worker know about a newly assigned job -- again using the controller channel."
msgstr ""

#: ../../source/architecture-and-design/bonnie.rst:298
# 7426ae30c73c43549b7c2001930e0d9e
msgid "The worker internally triggers the retrieval of the job using the worker channel."
msgstr ""

#: ../../source/architecture-and-design/bonnie.rst:315
# 8eedf7d5384e4142a4de9721fa22a54c
msgid "The worker is now in state BUSY and must respond within a set interval or the broker will set the job back in to PENDING state, and mark the worker as unavailable."
msgstr ""

#: ../../source/architecture-and-design/bonnie.rst:322
# e9472cb5792f470ba432b33fc784abda
msgid "Worker Design"
msgstr ""

#: ../../source/architecture-and-design/bonnie.rst:324
# 918b69667ed142a1873da364ea206aff
msgid "The worker is built out of plugins, that subscribe to an event type, where event types available are listed in :ref:`and-bonnie-event-notification-types`."
msgstr ""

#: ../../source/architecture-and-design/bonnie.rst:328
# b2a4e9223a8d449185e83006f77a3756
msgid "Each event type individually may require handling -- for example, a logout event is associated with the corresponding login event."
msgstr ""

#: ../../source/architecture-and-design/bonnie.rst:331
# 38557dc722fb4b08992872c85749b727
msgid "The following components will be pluggable and configurable:"
msgstr ""

#: ../../source/architecture-and-design/bonnie.rst:333
# 44c290986b064dc1bfee00cf04d1a2a7
msgid "subscribing to a message bus or queue, as ``inputs``, initially including only ``zmq``."
msgstr ""

#: ../../source/architecture-and-design/bonnie.rst:336
# abc61ef4b3864b3d81d5723cfce3b14e
msgid "event handling, as ``handlers``, initially including only one handler per event notification and higher level processors ``changelog`` and ``freebusy`` to detect changes in groupwware objects."
msgstr ""

#: ../../source/architecture-and-design/bonnie.rst:341
# 3223cfeebff149f591aebaea51ec2706
msgid "result output, as ``output``, initially including only ``elasticsearch``."
msgstr ""

#: ../../source/architecture-and-design/bonnie.rst:344
# eda2673a59474e2db853773ddf224a2e
msgid "storage for transactions pending or aggregated meta information, as ``storage``, initialy including only ``elasticsearch``."
msgstr ""

#: ../../source/architecture-and-design/bonnie.rst:347
# 9eb93efb4c254bb5a4e5c55b50ab4fdb
msgid "Assuming an installation path of :file:`bonnie/worker/`, the following depicts its tree layout:"
msgstr ""

#: ../../source/architecture-and-design/bonnie.rst:365
# 50c821e739874c9eb89d7e9455f9716a
msgid "To take the changelog and freebusy handlers as an example, the following event notification types may need to be subscribed to."
msgstr ""

#: ../../source/architecture-and-design/bonnie.rst:368
#: ../../source/architecture-and-design/bonnie.rst:432
# 1e1923856b4b4be6a503815c30796516
# d0b077624c2649598a23d5bf697f641b
msgid ":ref:`and-bonnie-event-mailboxcreate`"
msgstr ""

#: ../../source/architecture-and-design/bonnie.rst:370
# 54895480c98a4c84813d9160b5ff7a44
msgid "A new mailbox that is an event folder may have been created."
msgstr ""

#: ../../source/architecture-and-design/bonnie.rst:372
# d7c8e5a5807549928e46166be62734c0
msgid "The initial event is handled by the base handler for the event notification type."
msgstr ""

#: ../../source/architecture-and-design/bonnie.rst:375
# 07e3919502a242beb43133efc164a52d
msgid "Passing this event right through to the changelog handler would make it require obtaining the ``/shared/vendor/kolab/folder-type`` and/or ``/private/vendor/kolab/folder-type`` metadata value(s) in order to determine whether the folder indeed is an event folder."
msgstr ""

#: ../../source/architecture-and-design/bonnie.rst:380
# 6d46f9cefc5c468c8dee71e7e3c48d3d
msgid "However, the setting of metadata is an event separate from the mailbox creation, and at the moment the handler receives the initial event notification, the metadata may not have been set yet."
msgstr ""

#: ../../source/architecture-and-design/bonnie.rst:386
# cc76cca307be457cb5bf0bf79b658bfd
msgid "At the time of this writing, no separate event notification for setting folder-level METADATA exists."
msgstr ""

#: ../../source/architecture-and-design/bonnie.rst:389
#: ../../source/architecture-and-design/bonnie.rst:433
# f81d4262d0924807858d369a662987d4
# 72b1eabf11db4a419bb2f32e48489071
msgid ":ref:`and-bonnie-event-mailboxdelete`"
msgstr ""

#: ../../source/architecture-and-design/bonnie.rst:391
# f6fece770efe441a9ee0696c2c800bc3
msgid "A mailbox that was an event folder may have been deleted."
msgstr ""

#: ../../source/architecture-and-design/bonnie.rst:393
#: ../../source/architecture-and-design/bonnie.rst:434
# 99aa695a984e42b9b645cc6de513589d
# 531c668175fe4c9fa93caf36d322c91c
msgid ":ref:`and-bonnie-event-mailboxrename`"
msgstr ""

#: ../../source/architecture-and-design/bonnie.rst:395
# d150b5d14b0e413fb26ecb4f0725c652
msgid "A mailbox that was an event folder may have been renamed."
msgstr ""

#: ../../source/architecture-and-design/bonnie.rst:397
#: ../../source/architecture-and-design/bonnie.rst:437
# a02c60aab65a4b1f993f3ed96d987a9f
# fe1cc36114bc474cbe30e32dd040ba67
msgid ":ref:`and-bonnie-event-messageappend`"
msgstr ""

#: ../../source/architecture-and-design/bonnie.rst:399
# 101a9fcd65ad451d975cce47fa7ef355
msgid "Only applicable to event folders, this depicts a new or updated version of an existing event has been appended."
msgstr ""

#: ../../source/architecture-and-design/bonnie.rst:402
#: ../../source/architecture-and-design/bonnie.rst:438
# b7cd9abeb125484191cdd86c5ccf9c85
# 4e1b222ff4184d51808ec9b891806642
msgid ":ref:`and-bonnie-event-messagecopy`"
msgstr ""

#: ../../source/architecture-and-design/bonnie.rst:404
# a053a67a0624413f968f3e23e6c977b1
msgid "One or more events may have been copied from an event folder into another event folder."
msgstr ""

#: ../../source/architecture-and-design/bonnie.rst:407
#: ../../source/architecture-and-design/bonnie.rst:441
# 0e4423e9a40f4ef0b912656081e15cb8
# bc1578998a90450ea8d35ebe55c186b3
msgid ":ref:`and-bonnie-event-messagemove`"
msgstr ""

#: ../../source/architecture-and-design/bonnie.rst:409
# 65241c763b544d8bbc0ace3e68a5ff35
msgid "One or more events may have been moved from one event folder into another event folder."
msgstr ""

#: ../../source/architecture-and-design/bonnie.rst:414
# 9ca4c5052e114e4da5ad5c1d336acbad
msgid "Plugins that are interested in the vendor/kolab/folder-type METADATA value(s) of a folder can reply with additional commands for the collector component which will put the current job back into the PENDING state and send it through the handler again once the requested information was added to the notification payload."
msgstr ""

#: ../../source/architecture-and-design/bonnie.rst:424
# 98bedbdcdf7f4498bc0e7a95115e92a3
msgid "Event Notification Types"
msgstr ""

#: ../../source/architecture-and-design/bonnie.rst:426
# 54f5d62131604e9abb81ba28f66cf574
msgid "Event types available include, in alphabetical order:"
msgstr ""

#: ../../source/architecture-and-design/bonnie.rst:428
# a03d9b5310c84e899ae02eb4fa35ba00
msgid ":ref:`and-bonnie-event-flagsclear`"
msgstr ""

#: ../../source/architecture-and-design/bonnie.rst:429
# a6d1873d21b2427ba3d78a2e4dd4ac16
msgid ":ref:`and-bonnie-event-flagsset`"
msgstr ""

#: ../../source/architecture-and-design/bonnie.rst:430
# 5ec601b8eb5241258bbecb83afb9779e
msgid ":ref:`and-bonnie-event-login`"
msgstr ""

#: ../../source/architecture-and-design/bonnie.rst:431
# db911a7fa110432eb9e9ea158dfddad0
msgid ":ref:`and-bonnie-event-logout`"
msgstr ""

#: ../../source/architecture-and-design/bonnie.rst:435
# ee82018384714a5e8be73d0dcf684304
msgid ":ref:`and-bonnie-event-mailboxsubscribe`"
msgstr ""

#: ../../source/architecture-and-design/bonnie.rst:436
# 5b068c6465174020a5e3ca7d679dddfe
msgid ":ref:`and-bonnie-event-mailboxunsubscribe`"
msgstr ""

#: ../../source/architecture-and-design/bonnie.rst:439
# 2f601a2c5f72438e8e4c5fd22c382d02
msgid ":ref:`and-bonnie-event-messageexpire`"
msgstr ""

#: ../../source/architecture-and-design/bonnie.rst:440
# 8311d27406fb4b51bf6418a02f6443ca
msgid ":ref:`and-bonnie-event-messageexpunge`"
msgstr ""

#: ../../source/architecture-and-design/bonnie.rst:442
# 8abcaf253f2b45619be7374efa9d6ead
msgid ":ref:`and-bonnie-event-messagenew`"
msgstr ""

#: ../../source/architecture-and-design/bonnie.rst:443
# 09f530d628c74a8fb30b5eabbc3a6c17
msgid ":ref:`and-bonnie-event-messageread`"
msgstr ""

#: ../../source/architecture-and-design/bonnie.rst:444
# 03cc6b027b584f729f05bf98b9c244cf
msgid ":ref:`and-bonnie-event-messagetrash`"
msgstr ""

#: ../../source/architecture-and-design/bonnie.rst:445
# 0a2ab53e779341b8b10156c4e0a5bdfc
msgid ":ref:`and-bonnie-event-quotaexceeded`"
msgstr ""

#: ../../source/architecture-and-design/bonnie.rst:446
# 9054f78dc04148b1bff581c3b8033aa4
msgid ":ref:`and-bonnie-event-quotawithin`"
msgstr ""

#: ../../source/architecture-and-design/bonnie.rst:447
# 70ce82b27ef24cb5afe3038e255cb24e
msgid ":ref:`and-bonnie-event-quotachange`"
msgstr ""

#: ../../source/architecture-and-design/bonnie.rst:452
# 6565cf80b5e4431d92beff45319080ad
msgid "FlagsClear"
msgstr ""

#: ../../source/architecture-and-design/bonnie.rst:454
# 8a2557d14d2543b08144c3f1ac486a1f
msgid "This event notification type indicates one or more messages have had its flags cleared."
msgstr ""

#: ../../source/architecture-and-design/bonnie.rst:457
# 7c59decd6fd64eb2b218278fc39f3eb1
msgid "Flags having been cleared may include ``\\Seen``, but also ``\\Deleted``, and any custom other flag on an IMAP message."
msgstr ""

#: ../../source/architecture-and-design/bonnie.rst:460
#: ../../source/architecture-and-design/bonnie.rst:470
#: ../../source/architecture-and-design/bonnie.rst:490
#: ../../source/architecture-and-design/bonnie.rst:499
# b98b9d716e1247c8b37b8aea4c692d95
# a4cbe0c0e7404140884d8697c36a7c0b
# 169b4545bc7743ac9e7204e22876da4c
# 86ae24148eff4b1c90e19d58c730945e
msgid "Subscribe to this notification for:"
msgstr ""

#: ../../source/architecture-and-design/bonnie.rst:462
#: ../../source/architecture-and-design/bonnie.rst:472
# 39f0ca052153428cab1947a2acb432d8
# d8f73a7f9b3b4b289620681a392cf748
msgid "Backup/Restore"
msgstr ""

#: ../../source/architecture-and-design/bonnie.rst:463
#: ../../source/architecture-and-design/bonnie.rst:473
#: ../../source/architecture-and-design/bonnie.rst:492
#: ../../source/architecture-and-design/bonnie.rst:501
# 558cd908489d49ec8789c3c7e3eb5eb4
# 1660ac83a39d4b8a8fb9569ad797b098
# 0fd644250ec8449e9db6f8c23fa5c97f
# ac34847a7b6b4a70a0bec238006c8717
msgid "e-Discovery"
msgstr ""

#: ../../source/architecture-and-design/bonnie.rst:468
# dc5162e012cd45e0a97793ecaf001733
msgid "FlagsSet"
msgstr ""

#: ../../source/architecture-and-design/bonnie.rst:478
# d6c41d2cdf124411b1de0c08c10e5c67
msgid "Login"
msgstr ""

#: ../../source/architecture-and-design/bonnie.rst:480
# 23aaa2c86ed74571bd686539cf8341ea
msgid "Additional information to obtain for this event notification type:"
msgstr ""

#: ../../source/architecture-and-design/bonnie.rst:482
# 54fac92d4fcc457bbc229dc09788346f
msgid "The persistent unique attribute for the user object."
msgstr ""

#: ../../source/architecture-and-design/bonnie.rst:483
# 3c18fc97b23e49e9879daf3f252bece7
msgid "Additional LDAP object attributes."
msgstr ""

#: ../../source/architecture-and-design/bonnie.rst:485
# f3a9f388c604489a8781341e325d1535
msgid "Information storage:"
msgstr ""

#: ../../source/architecture-and-design/bonnie.rst:487
# dbfc6b03dd5f42d49eb51d3f73892adc
msgid "This event needs to be stored until it can be associated with a :ref:`and-bonnie-event-logout` event notification type."
msgstr ""

#: ../../source/architecture-and-design/bonnie.rst:497
# d19cfb5fb56e490babc4fb41117ed381
msgid "Logout"
msgstr ""

#: ../../source/architecture-and-design/bonnie.rst:506
# a89118a0c7234f7aa6f8d5aebbffd23e
msgid "MailboxCreate"
msgstr ""

#: ../../source/architecture-and-design/bonnie.rst:508
# 9f4e445214f0447a9a075b8a47c18be3
msgid "Additional information to obtain"
msgstr ""

#: ../../source/architecture-and-design/bonnie.rst:513
# 85df79b3b1aa4af5a52222d8e3366df3
msgid "MailboxDelete"
msgstr ""

#: ../../source/architecture-and-design/bonnie.rst:518
# e5246e51d9044dcc920ecb29e5ae14a9
msgid "MailboxRename"
msgstr ""

#: ../../source/architecture-and-design/bonnie.rst:523
# 63f10e6d10f8437da7aacfed09b01c8a
msgid "MailboxSubscribe"
msgstr ""

#: ../../source/architecture-and-design/bonnie.rst:528
# 891b8fc76b4d478691e4f8aa34246690
msgid "MailboxUnsubscribe"
msgstr ""

#: ../../source/architecture-and-design/bonnie.rst:533
# fc388f730a6647ffaebb438f6a7b91fa
msgid "MessageAppend"
msgstr ""

#: ../../source/architecture-and-design/bonnie.rst:538
# c6c93638cd574b07976e783afee321ec
msgid "MessageCopy"
msgstr ""

#: ../../source/architecture-and-design/bonnie.rst:543
# 02704e15df4f484796c66e0a598131d3
msgid "MessageExpire"
msgstr ""

#: ../../source/architecture-and-design/bonnie.rst:548
# 06d26469bbe141f988fd06107d253dd5
msgid "MessageExpunge"
msgstr ""

#: ../../source/architecture-and-design/bonnie.rst:553
# 7b6231cc90e04f4fa3e8c14a3b3385f8
msgid "MessageMove"
msgstr ""

#: ../../source/architecture-and-design/bonnie.rst:558
# 3b177b9b50594f739381836b98b02c5a
msgid "MessageNew"
msgstr ""

#: ../../source/architecture-and-design/bonnie.rst:563
# 3488df5f035041d8b466efda638bd2f8
msgid "MessageRead"
msgstr ""

#: ../../source/architecture-and-design/bonnie.rst:568
# 3bd31f68ea4d4d61a57bd4def8b95eda
msgid "MessageTrash"
msgstr ""

#: ../../source/architecture-and-design/bonnie.rst:573
# 40d45ea19c374d66837326553a837d2f
msgid "QuotaExceeded"
msgstr ""

#: ../../source/architecture-and-design/bonnie.rst:578
# 2602c4ebfe3b44feb7c2b5ea4e7caa18
msgid "QuotaWithin"
msgstr ""

#: ../../source/architecture-and-design/bonnie.rst:583
# 6a0c010c775845aa98e41bcd2e1b1211
msgid "QuotaChange"
msgstr ""

#: ../../source/architecture-and-design/bonnie.rst:586
# 3202a1814bc84526a3d115e4c27463f0
msgid "An Integrated Solution"
msgstr ""

#: ../../source/architecture-and-design/bonnie.rst:588
# 5617671495ba46a38617ce16d273e41f
msgid "The following aspects of an environment need to be tracked;"
msgstr ""

#: ../../source/architecture-and-design/bonnie.rst:590
# f2122f0a31bf4d1c833b6941c8fb0d6a
msgid "Logs such as ``/var/log/maillog``, which contain the information about exchange of messages between internal and external systems and software (Postfix/LMTP -> Cyrus IMAP)."
msgstr ""

#: ../../source/architecture-and-design/bonnie.rst:594
# 2015780cf5584f9998fcc5bca29a8b0d
msgid "Cyrus IMAP 2.5 Events broadcasted."
msgstr ""

#: ../../source/architecture-and-design/bonnie.rst:631
# e26a998e7dcc4e418399bec27a696438
msgid "In this picture, IMAP (using Cyrus IMAP 2.5) issues so-called :term:`event notifications` to a message bus, that can be picked up by the appropriate subscribers."
msgstr ""

#: ../../source/architecture-and-design/bonnie.rst:635
# f7e0d0b1c58e45a18d6aa24ab986d725
msgid "Note that the subscribers are different components to plug in and enable, or leave out -- not everyone has a need for Archival and e-Discovery capabilities."
msgstr ""

#: ../../source/architecture-and-design/bonnie.rst:638
# 88d8f963bcdd4c18a2655791bc69b0ae
msgid "As such, a component plugged in could announce its presence, and start working backwards as well as start collecting the relevant subsets of data in a retro- active manner."
msgstr ""

#: ../../source/architecture-and-design/bonnie.rst:664
# 3b2e8c053d9445b086a9913f3db60a3d
msgid "To allow scaling, the intermediate medium is likely a message bus such as ActiveMQ, AMQP, ZeroMQ, etc."
msgstr ""

#: ../../source/architecture-and-design/bonnie.rst:667
# 3c9ca4c130044454a3f0bd1ac6b1ecfc
msgid "Between Cyrus IMAP 2.5 and the message bus must be a thin application that is capable of:"
msgstr ""

#: ../../source/architecture-and-design/bonnie.rst:670
# 989a952d18064b30b8b395c8ef41de2f
msgid "Retrieving the payload of the message(s) involved if necessary,"
msgstr ""

#: ../../source/architecture-and-design/bonnie.rst:671
# b1dd8001b6064f7383bca7aa2929924e
msgid "Submit the remainder to a message bus."
msgstr ""

#: ../../source/architecture-and-design/bonnie.rst:673
# 38e0b944943046b4882444f3d4a19709
msgid "This is because Cyrus IMAP 2.5:"
msgstr ""

#: ../../source/architecture-and-design/bonnie.rst:675
# 6a78647d4cb54f00884d62dd7a1b7cce
msgid "at the time of this writing, does not support submitting the event notifications to a message bus directly [#]_,"
msgstr ""

#: ../../source/architecture-and-design/bonnie.rst:678
# c0022c8171814e729655a3683edb7f58
msgid "the size of the message payload is likely to exceed the maximum size of an event notification datagram [#]_."
msgstr ""

#: ../../source/architecture-and-design/bonnie.rst:681
# 23f44e4279024b598f5ec239df68141c
msgid "Processing of inbound messages must happen real-time or near-time, but should also be post-processed:"
msgstr ""

#: ../../source/architecture-and-design/bonnie.rst:684
# bdeea822eb8c499b849c87e3a86b22d1
msgid "e-Discovery requires post-processing to sufficiently associate the message in its context, and contains an audit trail."
msgstr ""

#: ../../source/architecture-and-design/bonnie.rst:687
# af7d2c1ca39d43f8aa93cf470d4cfd7c
msgid "Archival and Backup require payload, and may also use post-processing to facilitate Restore."
msgstr ""

#: ../../source/architecture-and-design/bonnie.rst:691
# 786ab3f619094d17878872cfeab439eb
msgid "Event Notifications"
msgstr ""

#: ../../source/architecture-and-design/bonnie.rst:693
# d449f3989b5a424f8edd6d859a7a86dc
msgid "The following events trigger notifications:"
msgstr ""

#: ../../source/architecture-and-design/bonnie.rst:728
# 3ddf6bb9cde643eda0d77d30cb168395
msgid "In addition, Kolab Groupware makes available the following event notifications:"
msgstr ""

#: ../../source/architecture-and-design/bonnie.rst:738
# 35ff1415aa5a4520920630976d8ef8b1
msgid "This means the following event notifications are lacking:"
msgstr ""

#: ../../source/architecture-and-design/bonnie.rst:740
# f62e9de7c3a54369966775b0d40cfbb1
msgid "METADATA change notification"
msgstr ""

#: ../../source/architecture-and-design/bonnie.rst:742
# 036537194c2346d19751bad718b9e8ce
msgid "It is possible to run Cyrus IMAP 2.5 notifications in a blocking fashion, allowing the (post-)processing operation(s) to complete in full before the IMAP session is allowed to continue / confirms the modification/mutation."
msgstr ""

#: ../../source/architecture-and-design/bonnie.rst:752
# 7e50385f10234f248ebe5f41b3e2c0b4
msgid "Queries and Information Distribution"
msgstr ""

#: ../../source/architecture-and-design/bonnie.rst:755
# efa884e2fdd149f0941a2560e3bb0359
msgid "ZeroMQ"
msgstr ""

#: ../../source/architecture-and-design/bonnie.rst:779
# 76104a7778a04114b7b79202d6dc84d2
msgid "Dealer <-> Broker <-> Worker Message Exchange"
msgstr ""

#: ../../source/architecture-and-design/bonnie.rst:781
# 84236647193245cdbe3caa706c38c5b4
msgid "Modelled after an article about tracking worker status at http://rfc.zeromq.org/spec:14"
msgstr ""

#: ../../source/architecture-and-design/bonnie.rst:813
# 5cb36a871f5f41229c2ed414f2a02088
msgid "**Dealer - Broker Concerns**"
msgstr ""

#: ../../source/architecture-and-design/bonnie.rst:815
# 26308e5658574b76bf07335f825e5c5d
msgid "The dealer is queuing without a high-water mark and without a local swap defined. It is only after the broker is available this queue is flushed. This could introduce a loss of notifications."
msgstr ""

#: ../../source/architecture-and-design/bonnie.rst:819
# 8e442888c02f4648bd9e3aab3e1b705c
msgid "The dealer is not awaiting confirmation in the sense that it will replay the submission if needed, such as after the dealer has been restarted. This too could introduce a loss of notifications."
msgstr ""

#: ../../source/architecture-and-design/bonnie.rst:823
# 23e57a64276744ba8b8b7e546a6ce225
msgid "The dealer is certainly not awaiting confirmation from any worker that the notification had been submitted to for handling."
msgstr ""

#: ../../source/architecture-and-design/bonnie.rst:826
# 2f7e5c0942334941a959c2c3e6dff691
msgid "The dealer is a sub-process of the cyrus-imapd service, and should this service be restarted, is not handling such signals to preserve state."
msgstr ""

#: ../../source/architecture-and-design/bonnie.rst:829
# 29c4cf757c264a7c8e2e440880c69a4a
msgid "**Broker Concerns**"
msgstr ""

#: ../../source/architecture-and-design/bonnie.rst:831
# 0f74bdcf197048d3a1687d7f08312b6b
msgid "The broker is keeping the job queue in memory for fast updates and responses."
msgstr ""

#: ../../source/architecture-and-design/bonnie.rst:834
# 61c76c25a0e843c194a7accb01771b74
msgid "The broker component shall periodically dump the job queue and registered worker and collector connections into a persistant storage layer which has yet to be defined."
msgstr ""

#: ../../source/architecture-and-design/bonnie.rst:923
# cf4f2e84ca5e424fa58513a8331103d4
msgid "Storage Layout and Schema"
msgstr ""

#: ../../source/architecture-and-design/bonnie.rst:926
# 655fca097fb54b08a8287734d81ea1d5
msgid "Logging Event Notifications"
msgstr ""

#: ../../source/architecture-and-design/bonnie.rst:928
# 3928ff9489ba4247a3d73d86a94e247c
msgid "Logging event notification into the storage backend (currently elasticsearch) is inspired by logstash and writes to daily rotated indexes ``logstash-Y-m-d`` using document type ``logs``. The basic schema of an event notification contains the following attributes:"
msgstr ""

#: ../../source/architecture-and-design/bonnie.rst:949
# 6c737513128a4a05ba6fdb731585670d
msgid "The very minimal attributes required for an event notification entry are"
msgstr ""

#: ../../source/architecture-and-design/bonnie.rst:951
# d29534c2ac1343369f5d0c4ae35a9c4f
msgid "``@timestamp``: The UTC time when the event was logged"
msgstr ""

#: ../../source/architecture-and-design/bonnie.rst:952
# a16683982a0e4d52ad2b444db8325274
msgid "``@version``: Bonnie data API version"
msgstr ""

#: ../../source/architecture-and-design/bonnie.rst:953
# e4e0f6f4a7f7443e8bc13dba5b665456
msgid "``event``: The Cyrus IMAP event"
msgstr ""

#: ../../source/architecture-and-design/bonnie.rst:954
# 57d2a3d6909242f89fc2cc6576110283
msgid "``service``: \"imap\" denoting that this logstash entry represents an IMAP event notification"
msgstr ""

#: ../../source/architecture-and-design/bonnie.rst:955
# 7f7cf86713c741158dd7d8ef7ee5fc8a
msgid "``session_id``: The Cyrus IMAP session identifier"
msgstr ""

#: ../../source/architecture-and-design/bonnie.rst:956
# 1820eb30079044b2af40ae77479c1530
msgid "``user``: The authenticated user who triggered the event"
msgstr ""

#: ../../source/architecture-and-design/bonnie.rst:958
# 23bc4dcf931e407e8c93e238f077cdd4
msgid "Depending on the event type, additional attributes containg message IDs, message headers or payload, flag names or ACL. For message or mailbox based events the ``uri`` attribute is added and refers to the mailbox/folder the operation was executed on."
msgstr ""

#: ../../source/architecture-and-design/bonnie.rst:962
# 0b1d744b0c884652919574fd1d03fe51
msgid "From the basic attributes, some relations to metadata (see :ref:`and-bonnie-storing-metadata`) are extracted and the logstash entry is extended with identifiers referring to user and folder metadata entries:"
msgstr ""

#: ../../source/architecture-and-design/bonnie.rst:966
# dd93cc326ab3464c96d9ad435f8c6622
msgid "``folder_uniqueid``: The gobally unique folder identifer of a mailbox folder from IMAP."
msgstr ""

#: ../../source/architecture-and-design/bonnie.rst:968
# 2e465233c30d453c91ada44f47f175aa
msgid "``folder_id``: Links to a folder entry representing the current state of a mailbox folder at the time the event occurred. This includes folder name, metadata and access rights."
msgstr ""

#: ../../source/architecture-and-design/bonnie.rst:971
# 5a707c616804423fbdf5f69cc0e14bfd
msgid "``user_id``: Unique identifier (from the LDAP ``nsuniqueid`` attribute) of the use who executed the logged operation in IMAP."
msgstr ""

#: ../../source/architecture-and-design/bonnie.rst:978
# cfedf8ad235d49d783964a61f7676b70
msgid "Storing Metadata"
msgstr ""

#: ../../source/architecture-and-design/bonnie.rst:980
# b433e703ab8545a0a6c8f0223947ee32
msgid "Metadata records are used to amend log data with more complete and persistent information of rather volatile attributes like username and mailbox URIs issued by Cyrus IMAP 2.5 notifications. For example, the same physical human being (jane.gi@example.org) could change email addresses for any of many unrelated causes (jane.doe@example.org) and IMAP folders can be renamed at any given time."
msgstr ""

#: ../../source/architecture-and-design/bonnie.rst:987
# 91107bc061ac4468a4d80a9874f7fa34
msgid "Users"
msgstr ""

#: ../../source/architecture-and-design/bonnie.rst:989
# d001e2180f144a408bdda625491a664a
msgid "Stored in ``objects/user`` with the following schema:"
msgstr ""

#: ../../source/architecture-and-design/bonnie.rst:1000
# c07b34525d3a4f70aea7e82d4049e35a
msgid "The ``nsuniqueid`` attribute from the LDAP is used as the primary key/id of user records."
msgstr ""

#: ../../source/architecture-and-design/bonnie.rst:1004
# 2347e85ad8934c1c9942261b5da8f974
msgid "Folders"
msgstr ""

#: ../../source/architecture-and-design/bonnie.rst:1006
# a8ade04001cb4d7fbd6e0cb4f6c69446
msgid "Stored in ``objects/folder`` with the following schema:"
msgstr ""

#: ../../source/architecture-and-design/bonnie.rst:1035
# 909535a6138546449e7fc8c51f0ee653
msgid "The primary key/id of folder records is computed as a checksum of all attributes and metadata entries considered relevant for the \"state\" of a folder. This means that a new folder record is created when ACLs or folder type metadata is changed."
msgstr ""

#: ../../source/architecture-and-design/bonnie.rst:1040
# 6a7bcd591c9b4060a6512295a12a1952
msgid "The keys of ``acl`` entries provided by the Collector module from IMAP data are translated into static user identifers."
msgstr ""

#: ../../source/architecture-and-design/bonnie.rst:1045
# 0ea64a3e585d42918ab20e45edf8b115
msgid "In order to compute the folder identifier, the complete set of folder information like metadata and acl has to be pulled from IMAP using a collector job on every single event notification. Once Cyrus IMAP supports notifications for metadata changes (`#3698 <https://issues.kolab.org/show_bug.cgi?id=3698>`_), this could be skipped and the folder metadata records can be updated on specific events only."
msgstr ""

#: ../../source/architecture-and-design/bonnie.rst:1055
# ab3aeecf74a54d548234093205ae50c3
msgid "Object Relations"
msgstr ""

#: ../../source/architecture-and-design/bonnie.rst:1057
# 4b2594604f0b42bda2a7aa0cbbe4df7e
msgid "Although elasticsearch isn't a relational database, the Bonnie storage model implies a simple object relation model between logs and metadata."
msgstr ""

#: ../../source/architecture-and-design/bonnie.rst:1098
# dc488468bcf8489db3193efc95e61e5f
msgid "Accessing the Collected Data"
msgstr ""

#: ../../source/architecture-and-design/bonnie.rst:1100
# 9feae6f34b404697b66ff9ab20db9812
msgid "Some of the collected data, primarily changelogs of groupware objects, shall be made available to Kolab clients to display the history of a certain object or creation/last-modification information including the according usernames which is not stored in the Kolab data format itself."
msgstr ""

#: ../../source/architecture-and-design/bonnie.rst:1105
# a64dd17fedb7490581cfc3f3f194ebed
msgid "A dedicated web service provides access to the archived data through an API and thereby translates the raw information from the storage backend into more concrete groupware object related data."
msgstr ""

#: ../../source/architecture-and-design/bonnie.rst:1109
# d8909abd905a43b2bd7f6d01ad751d21
msgid "See the :ref:`and-bonnie-client-api` for details."
msgstr ""

#: ../../source/architecture-and-design/bonnie.rst:1113
# fa1f0274ea854b6cb95ebbb68b255e4e
msgid "Footnotes"
msgstr ""

#: ../../source/architecture-and-design/bonnie.rst:1116
# 88e73cce497343ca82aeb14a399e9d7c
msgid "The worker shall be a multi-threaded daemon (using multiprocessing.Pool), that is a pluggable application."
msgstr ""

#: ../../source/architecture-and-design/bonnie.rst:1121
# 92c6acc1827e472e89f944a766443e0e
msgid ":ref:`and-bonnie-worker-design`"
msgstr ""

#: ../../source/architecture-and-design/bonnie.rst:1122
# 21120d52b9624ba38d6afc843e3fdedd
msgid ":ref:`and-bonnie-broker-worker-interaction`"
msgstr ""

#: ../../source/architecture-and-design/bonnie.rst:1126
# 3c2d538034794bd3abc3108176477caa
msgid "The worker shall determine based on functional features enabled, and existing data, whether or not it requires a copy of the original message payload."
msgstr ""

#: ../../source/architecture-and-design/bonnie.rst:1132
# b5307f7e38a74e768cc2598a7ff848a6
msgid "It is assumed we'll be working with RSyslog, Logstash and Elastic Search."
msgstr ""

#: ../../source/architecture-and-design/bonnie.rst:1137
# bca9d53b736d449ab561b67097c7318c
msgid "http://git.cyrusimap.org/cyrus-imapd/tree/notifyd?id=8bdaeae3f891ba2a748ba91a4c324ee11346e292"
msgstr ""

#: ../../source/architecture-and-design/bonnie.rst:1141
# 6be6b08c96594473a25b5d0a090d5d83
msgid "Needs further investigation, for the actual maximum size of a datagram may have ceased to be hard-coded. Yet, to submit a large message through the notification daemon while the notification target is eligible to pick up the message contents from the filesystem seems like duplication."
msgstr ""

